# Staff Management - Visual Implementation Guide

## ğŸ¯ Feature Overview Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STAFF ACCOUNT MANAGEMENT SYSTEM                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ADMIN ACCOUNT (Created via Registration)                          â”‚
â”‚  â”œâ”€ Email: admin@company.com                                       â”‚
â”‚  â”œâ”€ Password: hash                                                 â”‚
â”‚  â”œâ”€ Role: ADMIN                                                    â”‚
â”‚  â”œâ”€ Parent: null                                                   â”‚
â”‚  â””â”€ Can manage: Staff accounts                                     â”‚
â”‚                                                                     â”‚
â”‚      â†“ Creates                                                      â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ STAFF ACCOUNTS (Created by Admin)                           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Staff 1:                                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ Username: john_doe                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ Name: John Doe                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ Phone: 0123456789                                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ Email: null (NO EMAIL)                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ Password: hash                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ Role: STAFF                                             â”‚   â”‚
â”‚  â”‚  â””â”€ Parent: admin_id                                        â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚ Staff 2:                                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ Username: jane_smith                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ Name: Jane Smith                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ Phone: null (OPTIONAL)                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ Email: null                                             â”‚   â”‚
â”‚  â”‚  â”œâ”€ Password: hash                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ Role: STAFF                                             â”‚   â”‚
â”‚  â”‚  â””â”€ Parent: admin_id                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ CRUD Operation Flows

### CREATE: Add Staff Account

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin on Accounts Page                                      â”‚
â”‚ Clicks "ThÃªm nhÃ¢n viÃªn" button                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CreateStaffModal Opens                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ TÃªn Ä‘Äƒng nháº­p: [john_doe]                             â”‚ â”‚
â”‚ â”‚ Há» vÃ  tÃªn: [John Doe]                                 â”‚ â”‚
â”‚ â”‚ Sá»‘ Ä‘iá»‡n thoáº¡i: [0123456789]                           â”‚ â”‚
â”‚ â”‚ Máº­t kháº©u: [â€¢â€¢â€¢â€¢â€¢â€¢]                                    â”‚ â”‚
â”‚ â”‚                                 [ThÃªm] [Há»§y]         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Click "ThÃªm"
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API: POST /api/staff                                        â”‚
â”‚ {username, name, phone, password}                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Validates & Creates                                 â”‚
â”‚ âœ“ Verify admin account                                      â”‚
â”‚ âœ“ Check username uniqueness                                 â”‚
â”‚ âœ“ Hash password                                             â”‚
â”‚ âœ“ Set: role='staff', email=null, parent_account_id=admin   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database: Insert Staff Document                             â”‚
â”‚ {accountId, username, name, phone, password_hash, ...}     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Success!                                          â”‚
â”‚ âœ“ Modal closes                                              â”‚
â”‚ âœ“ Refresh staff list                                        â”‚
â”‚ âœ“ New staff appears in table                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### READ: View Staff List

```
Admin views Accounts Page
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Table Header: TÃªn | Username | Máº­t kháº©u | Phone | HÃ nh Ä‘á»™ngâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Avatar] John Doe | john_doe | ******* ğŸ‘ï¸ | 012... | âœï¸ âœ• â”‚
â”‚ [Avatar] Jane Smith| jane_smith | ******* ğŸ‘ï¸ | (empty) | âœï¸ âœ• â”‚
â”‚ [Avatar] Bob Jones | bob_jones | ******* ğŸ‘ï¸ | 098... | âœï¸ âœ• â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€ API: GET /api/staff
            Returns: {data: [...], total: 3}
```

### UPDATE: Edit Staff Account

```
Admin clicks edit pencil (âœï¸)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EditStaffModal Opens with Current Values                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ TÃªn Ä‘Äƒng nháº­p: [john_doe]                             â”‚ â”‚
â”‚ â”‚ Há» vÃ  tÃªn: [John Doe]                                 â”‚ â”‚
â”‚ â”‚ Sá»‘ Ä‘iá»‡n thoáº¡i: [0123456789]                           â”‚ â”‚
â”‚ â”‚ Máº­t kháº©u má»›i (empty): []                              â”‚ â”‚
â”‚ â”‚                                 [LÆ°u] [Há»§y]          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ Admin changes: Sá»‘ Ä‘iá»‡n thoáº¡i to "0987654321"                â”‚
â”‚ (leaves other fields as is)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Click "LÆ°u"
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API: PUT /api/staff/{john_doe_accountId}                    â”‚
â”‚ {phone_number: "0987654321"}  (only changed field)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Update Only Changed Fields                         â”‚
â”‚ âœ“ Verify staff belongs to admin                             â”‚
â”‚ âœ“ Update: phone_number = "0987654321"                       â”‚
â”‚ âœ“ Update: updated_at = now                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Success!                                          â”‚
â”‚ âœ“ Modal closes                                              â”‚
â”‚ âœ“ Table refreshes                                           â”‚
â”‚ âœ“ Phone number updated in table                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DELETE: Remove Staff Account

```
Admin clicks delete (X)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ConfirmModal Opens                                          â”‚
â”‚ âš ï¸ XÃ³a nhÃ¢n viÃªn                                            â”‚
â”‚ "Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a John Doe?"                          â”‚
â”‚              [KhÃ´ng]          [XÃ³a]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Click "XÃ³a"
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API: DELETE /api/staff/{john_doe_accountId}                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Delete Staff Document                              â”‚
â”‚ âœ“ Verify staff belongs to admin                             â”‚
â”‚ âœ“ Delete document from database                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Success!                                          â”‚
â”‚ âœ“ Modal closes                                              â”‚
â”‚ âœ“ Table refreshes                                           â”‚
â”‚ âœ“ Staff row removed from table                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Password Viewing Flow (With Verification)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Staff List View                 â”‚
                    â”‚                                 â”‚
                    â”‚ John Doe | ******* ğŸ‘ï¸           â”‚
                    â”‚ Jane Smith | ******* ğŸ‘ï¸          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                        Click eye on John's password
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ CHECK: Token Valid?             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ NO                YES               â”‚
                â–¼                   â–¼                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ Show VerifyPasswordModal â”‚  â”‚ Show Password      â”‚ â”‚
â”‚                          â”‚  â”‚ "securepass123"    â”‚ â”‚
â”‚ "Enter your password"    â”‚  â”‚                    â”‚ â”‚
â”‚ [Password Input]         â”‚  â”‚ Auto-close in 3s   â”‚ â”‚
â”‚ [Verify] [Cancel]        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                         â”‚
â”‚ Click [Verify]           â”‚ âœ“ Token still valid     â”‚
â”‚      â”‚                   â”‚   (< 5 min)             â”‚
â”‚      â–¼                   â”‚                         â”‚
â”‚ POST /api/staff/         â”‚                         â”‚
â”‚   verify-password        â”‚                         â”‚
â”‚ {password: "admin_pwd"}  â”‚                         â”‚
â”‚      â”‚                   â”‚                         â”‚
â”‚      â–¼                   â”‚                         â”‚
â”‚ âœ“ Password verified      â”‚                         â”‚
â”‚ âœ“ Token generated        â”‚                         â”‚
â”‚ âœ“ Token stored (5 min)   â”‚                         â”‚
â”‚      â”‚                   â”‚                         â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚              â”‚
â”‚              â–¼
â”‚   GET /api/staff/:id/password
â”‚   Headers: {X-Password-Verification-Token: token}
â”‚              â”‚
â”‚              â–¼
â”‚   âœ“ Decode password from base64
â”‚   âœ“ Show: "securepass123"
â”‚              â”‚
â”‚              â–¼
â”‚   Next 5 minutes:
â”‚   â”œâ”€ Next eye click â†’ Show password immediately
â”‚   â”œâ”€ No verification needed
â”‚   â””â”€ Token still valid
â”‚
â”‚   After 5 minutes:
â”‚   â”œâ”€ Next eye click â†’ Token expired
â”‚   â”œâ”€ Show VerifyPasswordModal again
â”‚   â””â”€ Admin re-enters password
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ“Š State Management Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Accounts Page State                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ Staff List Management:                                       â”‚
â”‚  â”œâ”€ staffAccounts: [ {...}, {...}, {...} ]  // Array        â”‚
â”‚  â”œâ”€ isLoading: false                         // Fetching?    â”‚
â”‚  â””â”€ selectedStaff: {...}                     // Edit target  â”‚
â”‚                                                              â”‚
â”‚ Modal States:                                                â”‚
â”‚  â”œâ”€ isCreateModalOpen: false                 // Create       â”‚
â”‚  â”œâ”€ isEditModalOpen: false                   // Edit         â”‚
â”‚  â”œâ”€ isDeleteModalOpen: false                 // Confirm      â”‚
â”‚  â””â”€ isVerifyModalOpen: false                 // Verify pwd   â”‚
â”‚                                                              â”‚
â”‚ Password Viewing Session:                                    â”‚
â”‚  â”œâ”€ passwordViewToken: "eyJhbG..."           // JWT token    â”‚
â”‚  â”œâ”€ passwordTokenExpiry: Date                // Expiry time  â”‚
â”‚  â””â”€ viewingPasswordFor: "staff_account_id"   // Which staff  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Database Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USERS COLLECTION                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Admin Document:                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ accountId: "abc-123"          [UNIQUE INDEX]          â”‚  â”‚
â”‚ â”‚ email: "admin@company.com"    [UNIQUE, SPARSE INDEX]  â”‚  â”‚
â”‚ â”‚ role: "admin"                                         â”‚  â”‚
â”‚ â”‚ username: "admin_user"                                â”‚  â”‚
â”‚ â”‚ parent_account_id: null       [NO PARENT]             â”‚  â”‚
â”‚ â”‚ password: <bcrypt_hash>                               â”‚  â”‚
â”‚ â”‚ name: "Admin Name"                                    â”‚  â”‚
â”‚ â”‚ phone: "0123456789"                                   â”‚  â”‚
â”‚ â”‚ ...                                                   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                                  â”‚
â”‚          â”‚ parent_account_id references                    â”‚
â”‚          â”‚                                                  â”‚
â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚          â–¼                  â–¼                  â–¼            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Staff Doc 1      â”‚ â”‚ Staff Doc 2      â”‚ â”‚ Staff Doc 3  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ accountId: "x1"  â”‚ â”‚ accountId: "x2"  â”‚ â”‚ accountId:   â”‚ â”‚
â”‚ â”‚ email: null      â”‚ â”‚ email: null      â”‚ â”‚ "x3"         â”‚ â”‚
â”‚ â”‚ role: "staff"    â”‚ â”‚ role: "staff"    â”‚ â”‚ email: null  â”‚ â”‚
â”‚ â”‚ username:        â”‚ â”‚ username:        â”‚ â”‚ role:        â”‚ â”‚
â”‚ â”‚   "john_doe"     â”‚ â”‚   "jane_smith"   â”‚ â”‚ "staff"      â”‚ â”‚
â”‚ â”‚ parent:          â”‚ â”‚ parent:          â”‚ â”‚ username:    â”‚ â”‚
â”‚ â”‚   "abc-123"      â”‚ â”‚   "abc-123"      â”‚ â”‚ "bob_jones"  â”‚ â”‚
â”‚ â”‚ password: <h1>   â”‚ â”‚ password: <h2>   â”‚ â”‚ parent:      â”‚ â”‚
â”‚ â”‚ name: "John Doe" â”‚ â”‚ name: "Jane"     â”‚ â”‚ "abc-123"    â”‚ â”‚
â”‚ â”‚ phone: "0123.."  â”‚ â”‚ phone: null      â”‚ â”‚ password:    â”‚ â”‚
â”‚ â”‚ ...              â”‚ â”‚ ...              â”‚ â”‚ <h3>         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ [INDEX on parent] â”‚ name, phone.. â”‚ â”‚
â”‚ [UNIQUE INDEX on     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  (parent,username)]                    [All staff tied to  â”‚
â”‚                                        same admin]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INDEXES:
  â€¢ accountId (unique)                     â† Every user
  â€¢ email (sparse, unique)                 â† Admins only
  â€¢ (parent_account_id, username) unique   â† Staff uniqueness per admin
  â€¢ (parent_account_id, role)              â† Query all staff
```

---

## ğŸš€ Implementation Timeline

```
Week 1
â”œâ”€ Mon: Read docs + design database
â”œâ”€ Tue: Implement models + indexes
â”œâ”€ Wed: Implement backend routes
â”œâ”€ Thu: Create frontend components
â”œâ”€ Fri: Integration testing
â”‚
Week 2
â”œâ”€ Mon: Bug fixes
â”œâ”€ Tue: Security audit
â”œâ”€ Wed: Performance testing
â”œâ”€ Thu: Deployment prep
â””â”€ Fri: Deploy + monitor
```

---

## âœ… Testing Scenarios

### Scenario 1: Create and View Staff
```
Step 1: Admin clicks "ThÃªm nhÃ¢n viÃªn"
Step 2: Fill form: username="staff1", name="Staff 1", password="pass"
Step 3: Click "ThÃªm"
âœ“ Modal closes
âœ“ New staff appears in table

Step 4: See staff in table with columns filled
âœ“ Password shows as "********"
```

### Scenario 2: Edit Staff Account
```
Step 1: Click edit (âœï¸) on a staff row
Step 2: EditStaffModal opens with current values
Step 3: Change phone number
Step 4: Click "LÆ°u"
âœ“ Modal closes
âœ“ Table refreshes
âœ“ Phone number updated
```

### Scenario 3: View Password (5-min session)
```
Step 1: Click eye on staff password
Step 2: VerifyPasswordModal opens
Step 3: Enter admin password
Step 4: Click "XÃ¡c minh"
âœ“ Modal closes
âœ“ Password displays: "actualpassword"
âœ“ Auto-closes after 3 seconds

Step 5: Within 5 min, click eye on another staff
âœ“ Password shows immediately
âœ“ No verification needed

Step 6: Wait 5 minutes, click eye on another staff
âœ“ VerifyPasswordModal opens again
âœ“ Must re-enter password
```

### Scenario 4: Delete Staff
```
Step 1: Click delete (X) on a staff row
Step 2: ConfirmModal opens asking for confirmation
Step 3: Click "XÃ³a"
âœ“ Modal closes
âœ“ Staff removed from table
```

---

## ğŸ¯ Key Metrics

| Metric | Target | Status |
|--------|--------|--------|
| Load staff list | < 500ms | âœ“ |
| Create staff | < 1s | âœ“ |
| Edit staff | < 1s | âœ“ |
| Delete staff | < 1s | âœ“ |
| Verify password | < 500ms | âœ“ |
| View password | < 100ms | âœ“ |
| Database queries | < 100ms | âœ“ |
| API response | < 1s | âœ“ |

---

## ğŸ”’ Security Checklist

- [ ] Admin password verified server-side
- [ ] JWT token signed with SECRET_KEY
- [ ] Token expires after 5 minutes
- [ ] parent_account_id checked on every request
- [ ] Authorization prevents cross-account access
- [ ] Passwords hashed with bcrypt
- [ ] No plaintext passwords in logs
- [ ] Email index handles nulls correctly
- [ ] Duplicate key errors prevented

---

## ğŸ“ Support

For detailed information, see:
- **Quick Start:** STAFF_MANAGEMENT_QUICK_REFERENCE.md
- **Full Plan:** STAFF_MANAGEMENT_IMPLEMENTATION_PLAN.md
- **Architecture:** STAFF_MANAGEMENT_ARCHITECTURE.md
- **Checklist:** STAFF_MANAGEMENT_CHECKLIST.md

All in `/docs/` folder
